<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/images/schoolIcon.jpg" type="image/x-icon" />
    <title>住宿申請</title>

    <link href="/stylesheets/student_apply.css" rel="stylesheet" type="text/css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg setNav justify-content-between">
            <a class="navbar-brand fs-4 " href="/">
                <img src="/images/schoolLogo.png" alt="school Icon" width="40" height="40" class="d-inline-block">
                國立高雄大學學生住宿系統
            </a>
            <ul class="navbar-nav fs-5 ">
                <li class="nav-item">
                    <a class="nav-link" href="/student/application">住宿申請</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/student/information">住宿資訊</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/student/repairForm/all">報修申請</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/student/messageBoard">留言板</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/student/violation">違規紀錄</a>
                </li>
            </ul>
        </nav>
        <p class="setTitleBlock">住宿申請</p>
    </header>

    <main>
        <form class="setContentBlock" method='post' action='http://localhost:3000/student/application/'> 
            
            <label for="" class="col-form-label">請選擇申請類別</label>
                    <select class="form-select" required="required" aria-label="Default select example" name="AType">
                        <option value="" selected disabled>請選擇</option>
                        <option value="申請住宿">申請住宿</option>
                        <option value="申請換宿">申請換宿</option>
                        <option value="申請退宿">申請退宿</option>
                    </select>
            <% if(data[0].SSex === "男"){ %>
                <label for="" class="col-form-label">請選擇欲申請之宿舍</label>
                <select class="form-select" required="required" aria-label="Default select example" name="DName">
                    <option value="" selected disabled>請選擇</option>
                    <option value="學一宿舍OA">學一宿舍OA</option>
                    <option value="學二宿舍OE">學二宿舍OE</option>
                    <option value="綜合大樓">綜合大樓</option>
                </select>
            <%} else {%>
                <label for="" class="col-form-label">請選擇欲申請之宿舍</label>
                <select class="form-select" required="required" aria-label="Default select example" name="DName">
                    <option value="" selected disabled>請選擇</option>
                    <option value="學一宿舍OB">學一宿舍OB</option>
                    <option value="學二宿舍OF">學二宿舍OF</option>
                </select>
            <%}%>
                <label for="inputRoom" class="col-form-label" id="roomLabel">請輸入欲申請之房號</label>
                    <input type="text" class="form-control" id="inputRoom" name="ARoomNumber">
                <div class="d-flex justify-content-center">
                    <input type="submit" class="submitButton" value="確認送出">
                </div>

            <!-- 如果已經申請過了需要顯示相對應畫面 h3,set button gone, get student apply information -->
            <!-- <% data=JSON.parse(data);%>
            <% if(data[0].ApplyNumber !== undefined) {%>
                <h3 class="setAppliedWord">您已於<%= data[0].DATE%>時送出申請，以下是您的申請選擇，審核狀態為<%= data[0].Approved%></h3>
            <%}%> -->
            <h4 class="setAppliedWord">最近一次申請您已於<%= data[0].DATE%>送出，以下是您的申請紀錄</h4>

            <div class="setContentBlock">
                <table class="table">
                    <thead class="table-light">
                        <tr>
                            <th scope="col">學號</th>
                            <th scope="col">姓名</th>
                            <th scope="col">學年度</th>
                            <th scope="col">學期</th>
                            <th scope="col">申請類別</th>
                            <th scope="col">棟別</th>
                            <th scope="col">房號</th>
                            <th scope="col">通過</th>
                        </tr>
                    </thead>

                        <tbody>
                            <% for(var i = 0; i < data.length; i++) { %>
                                <tr class="infoContainer"> 
                                    <td><%= data[i].StuID%></td>
                                    <td><%= data[i].UName%></td>
                                    <td>111</td>
                                    <td>第二學期</td>
                                    <td><%= data[i].AType%></td>
                                    <td><%= data[i].DName%></td>
                                    <td><%= data[i].ARoomNumber%></td>
                                    <td><%= data[i].Approved%></td>
                                </tr>
                            <% } %>
                        </tbody>
                </table>

            </div>
        </form>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
    <script src="/javascripts/student_apply.js"></script>
</body>

</html>